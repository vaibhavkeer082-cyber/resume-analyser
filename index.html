<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Analyser 2026 ðŸš€ | AI Scorer</title>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CDNs for Logic/Visuals -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary: #00f3ff; /* Neon Cyan */
            --secondary: #bc13fe; /* Neon Purple */
            --success: #00ff9d;
            --danger: #ff0055;
            --bg: #050510;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg);
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(188, 19, 254, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 243, 255, 0.1) 0%, transparent 20%);
        }

        /* --- Animations --- */
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 243, 255, 0.4); } 70% { box-shadow: 0 0 0 15px rgba(0, 243, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 243, 255, 0); } }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        @keyframes glowText { 0% { text-shadow: 0 0 5px var(--primary); } 50% { text-shadow: 0 0 20px var(--primary), 0 0 30px var(--secondary); } 100% { text-shadow: 0 0 5px var(--primary); } }

        /* --- Typography --- */
        h1, h2, h3 { font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 2px; }
        .neon-text { color: var(--primary); animation: glowText 3s infinite alternate; }
        .gradient-text { background: linear-gradient(45deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* --- Layout --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; position: relative; z-index: 2; }
        
        /* Hero */
        header { text-align: center; padding: 60px 0 40px; }
        .hero-title { font-size: 3.5rem; margin-bottom: 10px; }
        .hero-subtitle { font-size: 1.2rem; color: #aaa; margin-bottom: 30px; }

        /* Upload Zone */
        .upload-zone {
            background: var(--glass);
            border: 2px dashed var(--secondary);
            border-radius: 20px;
            padding: 60px;
            text-align: center;
            transition: 0.3s;
            cursor: pointer;
            backdrop-filter: blur(10px);
            margin: 0 auto;
            max-width: 800px;
            position: relative;
            overflow: hidden;
        }
        .upload-zone:hover, .upload-zone.dragover { border-color: var(--primary); background: rgba(0, 243, 255, 0.05); transform: scale(1.02); }
        .upload-icon { font-size: 4rem; color: var(--secondary); margin-bottom: 20px; animation: float 3s ease-in-out infinite; }
        .btn-main {
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            border: none;
            padding: 15px 40px;
            color: #fff;
            font-family: 'Orbitron';
            font-weight: bold;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            animation: pulse 2s infinite;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(5, 5, 16, 0.95);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .scanner-box {
            width: 300px; height: 400px; border: 2px solid var(--primary);
            position: relative; overflow: hidden; box-shadow: 0 0 20px var(--primary);
        }
        .scan-line {
            width: 100%; height: 5px; background: var(--success);
            position: absolute; box-shadow: 0 0 15px var(--success);
            animation: scan 2s linear infinite;
        }
        .loading-text { margin-top: 20px; font-family: 'Orbitron'; color: var(--primary); font-size: 1.5rem; }

        /* Dashboard */
        #results-dashboard { display: none; margin-top: 40px; }
        
        /* Stats Grid */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 40px; }
        
        /* Cards */
        .card {
            background: rgba(20, 20, 35, 0.8);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            position: relative;
            backdrop-filter: blur(10px);
        }

        /* Score Card */
        .score-circle {
            width: 200px; height: 200px;
            border-radius: 50%;
            border: 10px solid #333;
            margin: 0 auto;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            position: relative;
            background: #111;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        .score-val { font-size: 4rem; font-weight: 900; font-family: 'Orbitron'; }
        .score-label { font-size: 0.9rem; color: #888; text-transform: uppercase; }

        /* Breakdown items */
        .breakdown-item { margin-bottom: 15px; }
        .breakdown-header { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .progress-bar { height: 8px; background: #333; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; transition: width 1.5s ease-out; }

        /* Feedback Cards */
        .feedback-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .feedback-card {
            background: rgba(255,255,255,0.03);
            border-left: 4px solid #555;
            padding: 15px;
            border-radius: 0 10px 10px 0;
            cursor: pointer;
            transition: 0.2s;
        }
        .feedback-card:hover { background: rgba(255,255,255,0.08); }
        .feedback-card.good { border-color: var(--success); }
        .feedback-card.bad { border-color: var(--danger); }
        .feedback-card.warn { border-color: #ffcc00; }
        .feedback-title { font-weight: 600; display: flex; align-items: center; gap: 10px; }
        .feedback-detail { margin-top: 10px; font-size: 0.9rem; color: #ddd; display: none; }
        .feedback-card.active .feedback-detail { display: block; animation: float 0.3s ease; }

        /* Footer */
        footer { text-align: center; padding: 40px; color: #666; font-size: 0.9rem; border-top: 1px solid var(--border); margin-top: 50px; }

        /* Mobile */
        @media (max-width: 768px) {
            .hero-title { font-size: 2.5rem; }
            .score-circle { width: 150px; height: 150px; }
            .score-val { font-size: 3rem; }
        }

        /* Utilities */
        .hidden { display: none !important; }
        .badge {
            background: var(--secondary); color: white; padding: 3px 8px;
            border-radius: 4px; font-size: 0.7rem; font-weight: bold;
        }
    </style>
</head>
<body>

    <!-- Loading Overlay -->
    <div id="loading-screen">
        <div class="scanner-box">
            <div class="scan-line"></div>
            <!-- Simulating resume content -->
            <div style="padding: 20px; opacity: 0.3; font-size: 10px; color: var(--primary);">
                <h3>RESUME_DATA_BLOCK</h3>
                <p>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</p>
                <p>â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ</p>
                <br>
                <p>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</p>
                <p>â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</p>
                <p>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</p>
            </div>
        </div>
        <div class="loading-text">NEURAL SCANNING <span id="loading-percent">0%</span></div>
    </div>

    <div class="container">
        <!-- Hero -->
        <header>
            <h1 class="hero-title neon-text">Resume Analyser <span style="font-size: 1.5rem; vertical-align: middle;">ðŸš€</span></h1>
            <p class="hero-subtitle">Upload PDF/Text. Get AI Score / 10. Beat the India 2026 Job Market.</p>
        </header>

        <!-- Upload Section -->
        <main id="main-interface">
            <div class="upload-zone" id="drop-zone">
                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                <h2>Drag & Drop Resume</h2>
                <p style="color: #aaa; margin: 10px 0;">Supports PDF or Plain Text</p>
                <input type="file" id="file-input" accept=".pdf,.txt" style="display: none;">
                <button class="btn-main" onclick="document.getElementById('file-input').click()">CHOOSE FILE</button>
                <p style="margin-top: 15px; font-size: 0.9rem;">or <a href="#" onclick="loadDemo()" style="color: var(--primary);">Load Sample Resume</a></p>
            </div>

            <!-- Results Dashboard -->
            <div id="results-dashboard">
                
                <!-- Market Stats Banner -->
                <div style="background: rgba(0, 243, 255, 0.1); border: 1px solid var(--primary); padding: 15px; border-radius: 10px; margin-bottom: 30px; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px;">
                    <div><i class="fas fa-chart-line" style="color: var(--primary)"></i> <strong>Market Insight (India 2026):</strong> React, Node.js & Cloud skills are up 40% in demand.</div>
                    <div id="market-badge" class="badge" style="background: var(--success); padding: 5px 10px;">TOP 15% CANDIDATE</div>
                </div>

                <div class="stats-grid">
                    <!-- Main Score -->
                    <div class="card" style="text-align: center;">
                        <h3>ATS Compatibility Score</h3>
                        <div style="height: 20px;"></div>
                        <div class="score-circle" id="score-circle">
                            <span class="score-val" id="final-score">0.0</span>
                            <span class="score-label">OUT OF 10</span>
                        </div>
                        <p id="score-msg" style="margin-top: 20px; font-weight: bold; color: var(--success);">Excellent!</p>
                    </div>

                    <!-- Radar Chart -->
                    <div class="card">
                        <h3>Skill Distribution</h3>
                        <canvas id="radarChart"></canvas>
                    </div>

                    <!-- Detailed Breakdown -->
                    <div class="card">
                        <h3>Category Breakdown</h3>
                        <div id="breakdown-container" style="margin-top: 20px;">
                            <!-- Injected via JS -->
                        </div>
                    </div>
                </div>

                <!-- AI Feedback -->
                <div class="card" style="margin-bottom: 40px;">
                    <h2 class="gradient-text" style="margin-bottom: 20px;"><i class="fas fa-robot"></i> AI Analysis & Fixes</h2>
                    <div class="feedback-grid" id="feedback-list">
                        <!-- Injected via JS -->
                    </div>
                    
                    <div style="margin-top: 30px; text-align: center;">
                        <button class="btn-main" style="background: linear-gradient(90deg, #333, #555); font-size: 0.9rem;" onclick="resetApp()">
                            <i class="fas fa-redo"></i> Analyze Another
                        </button>
                    </div>
                </div>

            </div>
        </main>

        <footer>
            <p>Built for Web Devs ðŸŽ® | 100% Client-Side Privacy | <span style="color: var(--primary)">No Backend</span></p>
            <p style="margin-top: 10px; font-size: 0.8rem; opacity: 0.6;">Uses pdf.js for parsing & simple heuristic algorithms for scoring.</p>
        </footer>
    </div>

    <script>
        // --- 1. CONFIGURATION & DICTIONARIES ---
        
        // 2026 India Market Keywords (Heuristic Database)
        const KEYWORDS = {
            tech: [
                'react', 'angular', 'vue', 'node.js', 'express', 'python', 'django', 'flask', 
                'java', 'spring', 'aws', 'azure', 'gcp', 'docker', 'kubernetes', 'ci/cd',
                'sql', 'mongodb', 'postgresql', 'redis', 'graphql', 'rest api', 'typescript',
                'machine learning', 'ai', 'tensorflow', 'pytorch', 'figma', 'git', 'agile'
            ],
            soft: [
                'leadership', 'communication', 'collaboration', 'problem solving', 'critical thinking',
                'teamwork', 'mentoring', 'strategic', 'adaptability', 'time management'
            ],
            action_verbs: [
                'spearheaded', 'developed', 'engineered', 'optimized', 'reduced', 'increased',
                'led', 'managed', 'created', 'designed', 'implemented', 'orchestrated', 'achieved'
            ]
        };

        // --- 2. PDF PARSING LOGIC (Using PDF.js) ---
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        async function parseFile(file) {
            if (file.type === 'text/plain') {
                return await file.text();
            } else if (file.type === 'application/pdf') {
                try {
                    const arrayBuffer = await file.arrayBuffer();
                    const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
                    let fullText = '';
                    
                    // Simple loading progress
                    const totalPages = pdf.numPages;
                    for (let i = 1; i <= totalPages; i++) {
                        updateLoading((i / totalPages) * 100);
                        const page = await pdf.getPage(i);
                        const textContent = await page.getTextContent();
                        const pageText = textContent.items.map(item => item.str).join(' ');
                        fullText += pageText + ' ';
                    }
                    return fullText;
                } catch (e) {
                    console.error(e);
                    alert("Error reading PDF. Ensure it's not password protected.");
                    return null;
                }
            } else {
                alert("Please upload a PDF or TXT file.");
                return null;
            }
        }

        // --- 3. ANALYSIS ENGINE (The "Brain") ---
        
        function analyzeResume(text) {
            const cleanText = text.toLowerCase();
            const words = cleanText.split(/\s+/);
            
            // 1. Scoring Logic
            let scores = {
                skills: 0,
                impact: 0,
                ats: 0,
                structure: 0
            };
            let feedback = [];

            // A. Skills Score (30%)
            const foundTech = KEYWORDS.tech.filter(k => cleanText.includes(k));
            const foundSoft = KEYWORDS.soft.filter(k => cleanText.includes(k));
            // Expecting at least 6 tech keywords and 3 soft skills for max score
            scores.skills = Math.min(10, (foundTech.length * 1) + (foundSoft.length * 0.5));

            if(foundTech.length < 4) feedback.push({ type: 'bad', title: 'Missing Core Tech Skills', desc: 'Market analysis suggests adding more hard skills (e.g., React, Node, AWS) specific to 2026 demand.' });
            else feedback.push({ type: 'good', title: 'Strong Tech Stack', desc: `Detected: ${foundTech.slice(0, 5).join(', ')}...` });

            // B. Impact/Metrics Score (25%)
            // Look for numbers followed by %, $, or keywords like "improved by"
            const metricsRegex = /(\d+%|\$\d+|\d+\+ user|increased by|reduced by|optimized|saved)/g;
            const metricsCount = (cleanText.match(metricsRegex) || []).length;
            scores.impact = Math.min(10, metricsCount * 1.5);
            
            if(metricsCount < 3) feedback.push({ type: 'bad', title: 'Lack of Quantifiable Impact', desc: 'Recruiters love numbers. Change "Managed sales" to "Increased sales by 20%".' });
            else feedback.push({ type: 'good', title: 'Data-Driven Achievements', desc: 'Great use of metrics/numbers to prove your value.' });

            // C. ATS/Keywords Score (25%)
            // Check for action verbs and contact info
            const actionVerbCount = KEYWORDS.action_verbs.filter(k => cleanText.includes(k)).length;
            const hasEmail = /@/.test(cleanText);
            const hasPhone = /\d{10}/.test(cleanText.replace(/[^0-9]/g, ''));
            const hasLinkedIn = cleanText.includes('linkedin') || cleanText.includes('github');
            
            let atsRaw = (actionVerbCount * 0.5) + (hasEmail ? 2 : 0) + (hasPhone ? 2 : 0) + (hasLinkedIn ? 2 : 0);
            scores.ats = Math.min(10, atsRaw);

            if(!hasLinkedIn) feedback.push({ type: 'warn', title: 'Missing Social Proof', desc: 'Add LinkedIn or GitHub links. 80% of hiring managers check them.' });

            // D. Structure Score (20%)
            // Heuristic: Length check (too short/long)
            const wordCount = words.length;
            let structScore = 10;
            if (wordCount < 200) { structScore = 4; feedback.push({type: 'bad', title: 'Too Short', desc: 'Resume is under 200 words. Flesh out your experience.'}); }
            else if (wordCount > 1200) { structScore = 6; feedback.push({type: 'warn', title: 'Too Long', desc: 'Resume is over 2 pages. Aim for concise impact.'}); }
            scores.structure = structScore;

            // Final Weighted Score
            // Skills 35%, Impact 25%, ATS 25%, Structure 15%
            const totalScore = (scores.skills * 0.35) + (scores.impact * 0.25) + (scores.ats * 0.25) + (scores.structure * 0.15);

            return {
                total: totalScore.toFixed(1),
                breakdown: scores,
                feedback: feedback,
                stats: {
                    wordCount,
                    techCount: foundTech.length
                }
            };
        }

        // --- 4. UI CONTROLLER ---

        const dom = {
            dropZone: document.getElementById('drop-zone'),
            fileInput: document.getElementById('file-input'),
            loading: document.getElementById('loading-screen'),
            percent: document.getElementById('loading-percent'),
            main: document.getElementById('main-interface'),
            results: document.getElementById('results-dashboard'),
            finalScore: document.getElementById('final-score'),
            scoreCircle: document.getElementById('score-circle'),
            scoreMsg: document.getElementById('score-msg'),
            breakdown: document.getElementById('breakdown-container'),
            feedback: document.getElementById('feedback-list'),
            marketBadge: document.getElementById('market-badge')
        };

        // Initialize App
        function init() {
            // Drag & Drop Listeners
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dom.dropZone.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            dom.dropZone.addEventListener('dragover', () => dom.dropZone.classList.add('dragover'));
            dom.dropZone.addEventListener('dragleave', () => dom.dropZone.classList.remove('dragover'));
            dom.dropZone.addEventListener('drop', handleDrop);
            dom.fileInput.addEventListener('change', (e) => handleFiles(e.target.files));
        }

        function handleDrop(e) {
            dom.dropZone.classList.remove('dragover');
            const files = e.dataTransfer.files;
            handleFiles(files);
        }

        function handleFiles(files) {
            if (files.length > 0) {
                startAnalysis(files[0]);
            }
        }

        function updateLoading(percent) {
            dom.percent.innerText = Math.round(percent) + '%';
        }

        async function startAnalysis(file) {
            // UI Transition
            dom.loading.style.display = 'flex';
            
            // Artificial delay for "Scanning" effect
            let p = 0;
            const interval = setInterval(() => {
                p += 5;
                if(p > 80) clearInterval(interval);
                else updateLoading(p);
            }, 100);

            // Parse
            const text = await parseFile(file);
            
            if (!text) {
                dom.loading.style.display = 'none';
                return;
            }

            // Analyze
            const results = analyzeResume(text);

            // Finish Loading
            clearInterval(interval);
            updateLoading(100);
            
            setTimeout(() => {
                dom.loading.style.display = 'none';
                showResults(results);
            }, 800);
        }

        function showResults(data) {
            dom.dropZone.style.display = 'none';
            dom.results.style.display = 'block';

            // 1. Animate Score
            animateValue(dom.finalScore, 0, data.total, 1500);
            
            // Color Coding
            const color = data.total >= 8 ? 'var(--success)' : (data.total >= 5 ? '#ffcc00' : 'var(--danger)');
            dom.scoreCircle.style.borderColor = color;
            dom.scoreCircle.style.boxShadow = `0 0 30px ${color}`;
            
            // Message
            if(data.total >= 8) {
                dom.scoreMsg.innerText = "Top Tier! Ready for MAANG.";
                dom.scoreMsg.style.color = 'var(--success)';
                dom.marketBadge.innerText = "TOP 5% CANDIDATE";
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            } else if (data.total >= 5) {
                dom.scoreMsg.innerText = "Good foundation. Needs polish.";
                dom.scoreMsg.style.color = '#ffcc00';
                dom.marketBadge.innerText = "TOP 40% CANDIDATE";
                dom.marketBadge.style.background = "#ffcc00";
                dom.marketBadge.style.color = "#000";
            } else {
                dom.scoreMsg.innerText = "Critical issues detected.";
                dom.scoreMsg.style.color = 'var(--danger)';
                dom.marketBadge.innerText = "NEEDS REWORK";
                dom.marketBadge.style.background = "var(--danger)";
            }

            // 2. Render Charts
            renderRadar(data.breakdown);
            renderBreakdown(data.breakdown);

            // 3. Render Feedback
            renderFeedback(data.feedback);
        }

        // Helper: Number Animation
        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = (progress * (end - start) + start).toFixed(1);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Render Radar Chart
        let radarChartInstance = null;
        function renderRadar(scores) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            if(radarChartInstance) radarChartInstance.destroy();

            radarChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Tech Skills', 'Impact/Metrics', 'ATS Keywords', 'Structure'],
                    datasets: [{
                        label: 'Your Resume',
                        data: [scores.skills, scores.impact, scores.ats, scores.structure],
                        backgroundColor: 'rgba(0, 243, 255, 0.2)',
                        borderColor: '#00f3ff',
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#fff'
                    },
                    {
                        label: 'Market Avg (2026)',
                        data: [6, 4, 5, 7], // Realistic averages
                        backgroundColor: 'rgba(255, 255, 255, 0.05)',
                        borderColor: '#666',
                        borderDash: [5, 5]
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255,255,255,0.1)' },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            pointLabels: { color: '#fff', font: { family: 'Orbitron' } },
                            ticks: { display: false, max: 10 }
                        }
                    },
                    plugins: { legend: { labels: { color: '#fff' } } }
                }
            });
        }

        // Render Linear Breakdown
        function renderBreakdown(scores) {
            const labels = { skills: 'Skills Match', impact: 'Quantified Impact', ats: 'ATS Optimization', structure: 'Formatting & Length' };
            let html = '';
            for (const [key, val] of Object.entries(scores)) {
                // Ensure value is capped at 10 for display logic
                const safeVal = Math.min(val, 10);
                const pct = (safeVal / 10) * 100;
                const color = safeVal > 7 ? 'var(--success)' : (safeVal > 4 ? '#ffcc00' : 'var(--danger)');
                
                html += `
                    <div class="breakdown-item">
                        <div class="breakdown-header">
                            <span>${labels[key]}</span>
                            <span style="color:${color}">${safeVal.toFixed(1)}/10</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${pct}%; background: ${color}"></div>
                        </div>
                    </div>
                `;
            }
            dom.breakdown.innerHTML = html;
        }

        // Render Feedback Cards
        function renderFeedback(list) {
            let html = '';
            list.forEach(item => {
                const icon = item.type === 'good' ? 'fa-check-circle' : (item.type === 'bad' ? 'fa-times-circle' : 'fa-exclamation-triangle');
                const color = item.type === 'good' ? 'var(--success)' : (item.type === 'bad' ? 'var(--danger)' : '#ffcc00');
                
                html += `
                    <div class="feedback-card ${item.type}" onclick="this.classList.toggle('active')">
                        <div class="feedback-title" style="color: ${color}">
                            <i class="fas ${icon}"></i> ${item.title} <i class="fas fa-chevron-down" style="margin-left: auto; font-size: 0.8rem; opacity: 0.5;"></i>
                        </div>
                        <div class="feedback-detail">
                            ${item.desc}
                        </div>
                    </div>
                `;
            });
            dom.feedback.innerHTML = html;
        }

        // Reset
        function resetApp() {
            dom.results.style.display = 'none';
            dom.dropZone.style.display = 'block';
            dom.finalScore.innerText = '0.0';
            // Clear file input
            dom.fileInput.value = '';
        }

        // Demo Functionality
        function loadDemo() {
            const demoText = `
                John Doe
                Full Stack Developer
                john.doe@email.com | linkedin.com/in/johndoe

                EXPERIENCE
                Senior Web Developer | TechCorp India | 2023 - Present
                - Spearheaded the migration of legacy code to React, reducing load times by 40%.
                - Managed a team of 5 developers.
                - Orchestrated deployment pipelines using Docker and CI/CD.

                Junior Developer | StartUp Inc | 2021 - 2023
                - Developed REST APIs using Node.js and Express.
                - Collaborated with design team.

                SKILLS
                JavaScript, Python, React, Node.js, AWS, MongoDB, SQL, Git.

                EDUCATION
                B.Tech Computer Science | IIT Bombay | 2021
            `;
            
            // Simulate file processing
            dom.loading.style.display = 'flex';
            let p = 0;
            const interval = setInterval(() => {
                p += 10;
                updateLoading(p);
                if(p >= 100) {
                    clearInterval(interval);
                    dom.loading.style.display = 'none';
                    showResults(analyzeResume(demoText));
                }
            }, 150);
        }

        // Start
        init();

    </script>
</body>
</html>
